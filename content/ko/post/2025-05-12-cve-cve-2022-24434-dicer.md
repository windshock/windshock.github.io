---
title: "Dicer ëª¨ë“ˆ ì·¨ì•½ì  ëŒ€ì‘ ê°€ì´ë“œ: CVE-2022-24434"
date: 2025-05-12
draft: false
tags: ["CVE", "Node.js", "dicer", "multer", "security"]
categories: ["Security"]
summary: "Multer ì˜ì¡´ì„±ì„ í†µí•´ ê°„ì ‘ì ìœ¼ë¡œ ì˜í–¥ì„ ë°›ëŠ” Dicer ëª¨ë“ˆì˜ ì·¨ì•½ì ì„ ë¶„ì„í•˜ê³ , ì‹¤ì œ ëŒ€ì‘ ë°©ì•ˆì„ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤. ìœ ì§€ë³´ìˆ˜ ì¤‘ë‹¨ëœ ì˜¤í”ˆì†ŒìŠ¤ì— ëŒ€í•œ í˜„ì‹¤ì ì¸ ëŒ€ì‘ ì˜ˆì‹œë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
---

## ğŸ§­ ìš”ì•½

| í•­ëª©                | ë‚´ìš©                                         |
| ----------------- | ------------------------------------------ |
| **ì·¨ì•½ì  ID**        | CVE-2022-24434                             |
| **ì˜í–¥ ë²”ìœ„**         | `dicer` â†’ `busboy` â†’ `multer` ê°„ì ‘ ì˜í–¥        |
| **ìœ„í—˜ ìˆ˜ì¤€**         | High (DoS - ì„œë¹„ìŠ¤ ê±°ë¶€)                        |
| **í•´ê²° ë²„ì „**         | `multer@1.4.4-lts.1`                       |
| **ë¦´ë¦¬ìŠ¤ ì¼ì**        | 2022ë…„ 5ì›” 29ì¼                               |
| **Node.js ìµœì†Œ ë²„ì „** | â‰¥ 6.0.0                                    |
| **ëŒ€ì‘ ìš”ì•½**         | `busboy` ì˜ì¡´ì„± ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ `dicer` ì·¨ì•½ì  ìš°íšŒ ë˜ëŠ” ì œê±° |

## ğŸ§¨ ì·¨ì•½ì  ê°œìš”

* **ê³µê²© ë°©ë²•**: `multipart/form-data` ìš”ì²­ì˜ í—¤ë”ë¥¼ ê³µë°±/íƒ­ ë¬¸ìë¡œ ì¡°ì‘ ì‹œ ì„œë²„ ì¶©ëŒ ìœ ë°œ
* **ë¬¸ì œ ìœ„ì¹˜**: `HeaderParser.prototype._parseHeader()` (Dicer ë‚´ë¶€)
* **ê³µì‹ ë³´ê³ ì¼**: 2022ë…„ 5ì›” 20ì¼ ([NVD ë§í¬](https://nvd.nist.gov/vuln/detail/CVE-2022-24434))

```text
Express â†’ Multer â†’ Busboy â†’ Dicer (ì·¨ì•½ì  ìœ„ì¹˜)
```

## ğŸ”§ íŒ¨ì¹˜ ì„¸ë¶€ ë‚´ìš©

### âœ… Multer 1.4.4-lts.1

* `busboy` 1.6.0 ì´ìƒ ì‚¬ìš© â†’ `dicer` ìš°íšŒ
* NestJSì—ì„œë„ ì±„íƒë¨ ([PR #9686](https://github.com/nestjs/nest/pull/9686))

### âš ï¸ dicerëŠ” ê³µì‹ íŒ¨ì¹˜ ì—†ìŒ

* PR ì¡´ì¬: [#22](https://github.com/mscdex/dicer/pull/22)
* í•˜ì§€ë§Œ ë³‘í•© ë° ë¦´ë¦¬ìŠ¤ X â†’ ì—¬ì „íˆ ì·¨ì•½

## ğŸ“¦ ì˜ì¡´ì„± ì²´ì¸ ë¶„ì„

| íŒ¨í‚¤ì§€    | ì·¨ì•½ ì—¬ë¶€ | íŒ¨ì¹˜ ì œê³µ ì—¬ë¶€      | ë¹„ê³                     |
| ------ | ----- | ------------- | --------------------- |
| Multer | ê°„ì ‘ ì˜í–¥ | âœ… 1.4.4-lts.1 | `busboy` ì˜ì¡´ì„± ì—…ê·¸ë ˆì´ë“œ í¬í•¨ |
| Busboy | ê°„ì ‘ ì˜í–¥ | âœ… 1.6.0 ì´ìƒ    | `dicer` ì œê±° ë˜ëŠ” ìš°íšŒ ì¶”ì •   |
| Dicer  | ì§ì ‘ ì˜í–¥ | âŒ ì—†ìŒ          | PRë§Œ ì¡´ì¬, ë¯¸ë³‘í•©           |

## ğŸ›  ëŒ€ì‘ ê°€ì´ë“œ

### 1ï¸âƒ£ Node.js ì—…ê·¸ë ˆì´ë“œ

* ìµœì†Œ: v6.0.0 ì´ìƒ
* ê¶Œì¥: v14 ì´ìƒ

### 2ï¸âƒ£ Multer ì—…ê·¸ë ˆì´ë“œ

```bash
npm install multer@1.4.4-lts.1
```

ë˜ëŠ” package.json:

```json
"dependencies": {
  "multer": "^1.4.4-lts.1"
}
```

### 3ï¸âƒ£ npm overrides (npm â‰¥ 8.3.0)

```json
"overrides": {
  "multer": "^1.4.4-lts.1"
}
```

### 4ï¸âƒ£ íŒ¨ì¹˜ ì§ì ‘ ì ìš© (ì •ì‹ íŒ¨ì¹˜ ì—†ì„ ê²½ìš°)

#### `patch-package`ë¡œ dicer ì„ì‹œ íŒ¨ì¹˜

```bash
npm install patch-package --save-dev
```

package.json:

```json
"scripts": {
  "postinstall": "patch-package"
}
```

dicer ë‚´ë¶€ ìˆ˜ì • (`node_modules/dicer/lib/Dicer.js`):

```diff
@@ -124,7 +124,11 @@
   this._bparser.on('info', function(isMatch, data, start, end) {
-    self._oninfo(isMatch, data, start, end);
+    try {
+      self._oninfo(isMatch, data, start, end);
+    } catch (e) {
+      self.emit('error', e);
+    }
   });
```

```bash
npx patch-package dicer
```

> âš ï¸ ì´ ë°©ì‹ì€ ì •ì‹ íŒ¨ì¹˜ê°€ ì•„ë‹ˆë©°, dicer ë²„ì „ ë³€ê²½ ì‹œ ì¬ì‘ì„± í•„ìš”

---

## ğŸ” ì¥ê¸° ê³ ë ¤ì‚¬í•­

* `dicer`ëŠ” ìœ ì§€ë³´ìˆ˜ ìƒíƒœê°€ ì¢‹ì§€ ì•ŠìŒ
* `@fastify/busboy` ë˜ëŠ” `fastify-multipart` ë“± ëŒ€ì²´ êµ¬ì¡° ê³ ë ¤ í•„ìš”

---

## ğŸ“š ì°¸ê³  ìë£Œ

* [ğŸ”’ CVE-2022-24434 (NVD)](https://nvd.nist.gov/vuln/detail/CVE-2022-24434)
* [ğŸ“¦ Multer GitHub Releases](https://github.com/expressjs/multer/releases)
* [ğŸ›  Dicer PR #22](https://github.com/mscdex/dicer/pull/22)
* [âœ… NestJS PR #9686](https://github.com/nestjs/nest/pull/9686)
* [ğŸ§ª Snyk Report for Multer](https://security.snyk.io/package/npm/multer)
* [ğŸ—‚ Stack Overflow ì‚¬ë¡€](https://stackoverflow.com/questions/74167128/dependency-problem-using-multer-and-multer-gridfs-storage)

---

## âœ… ê²°ë¡ 

* `Multer@1.4.4-lts.1`ì€ CVE-2022-24434ì— ëŒ€í•œ ê°„ì ‘ ëŒ€ì‘ ë²„ì „
* Node.js 6 ì´ìƒ í™˜ê²½ì—ì„œëŠ” ì—…ê·¸ë ˆì´ë“œë§Œìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ëŒ€ì‘ ê°€ëŠ¥
* ì¥ê¸°ì ìœ¼ë¡œëŠ” **êµ¬ì¡°ì  ëŒ€ì²´ ë˜ëŠ” ì˜ì¡´ì„± ì œê±° ì „ëµ**ì´ í•„ìš”
